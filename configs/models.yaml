# AI Quant Company - LLM 模型配置
# 通过 Antigravity 统一调用各 LLM 提供商

# ============================================
# 能力层映射
# ============================================
tiers:
  # 强推理层 - 用于审查、评估、决策
  reasoning:
    description: "强推理/审查/权衡能力"
    primary:
      provider: "antigravity"
      model: "claude-sonnet-4-20250514"
      max_tokens: 8192
      temperature: 0.7
    fallback:
      provider: "antigravity"
      model: "gpt-4o"
      max_tokens: 8192
      temperature: 0.7
    
  # 编码层 - 用于数据处理、回测实现
  coding:
    description: "代码/工程/调试能力"
    primary:
      provider: "antigravity"
      model: "gpt-4o"
      max_tokens: 8192
      temperature: 0.3
    fallback:
      provider: "antigravity"
      model: "gemini-2.0-flash"
      max_tokens: 8192
      temperature: 0.3
      
  # 报告层 - 用于文档生成
  reporting:
    description: "报告/可读性/结构能力"
    primary:
      provider: "antigravity"
      model: "claude-sonnet-4-20250514"
      max_tokens: 16384
      temperature: 0.5
    fallback:
      provider: "antigravity"
      model: "gpt-4o"
      max_tokens: 16384
      temperature: 0.5

# ============================================
# 抗同质化配置
# ============================================
# 目的：避免同一模型的 Agent 之间形成"认知趋同"
anti_homogeneity:
  # 研究团队 A 使用 Gemini 系列
  research_team_a:
    provider: "antigravity"
    model: "gemini-2.0-flash"
    reasoning: "Team A 使用 Gemini，与 Team B 形成差异化思维"
    
  # 研究团队 B 使用 OpenAI 系列
  research_team_b:
    provider: "antigravity"
    model: "gpt-4o"
    reasoning: "Team B 使用 GPT，与 Team A 形成差异化思维"
    
  # 否决组使用 Anthropic 系列
  veto_group:
    provider: "antigravity"
    model: "claude-sonnet-4-20250514"
    reasoning: "否决组必须与研究组不同，确保独立审查"
    applies_to:
      - "cro"
      - "skeptic"
      - "data_quality_auditor"

# ============================================
# Provider 配置
# ============================================
providers:
  # Antigravity 作为统一的 LLM 网关 (OpenAI-compatible API)
  antigravity:
    base_url_env: "ANTIGRAVITY_BASE_URL"
    api_key_env: "ANTIGRAVITY_API_KEY"
    retry_attempts: 3
    retry_delay: 1.0
    timeout: 120
    # 通过 Antigravity 可访问的模型
    models:
      - "gpt-4o"
      - "gpt-4o-mini"
      - "gpt-4-turbo"
      - "claude-sonnet-4-20250514"
      - "claude-3-5-sonnet-20241022"
      - "claude-3-haiku-20240307"
      - "gemini-2.0-flash"
      - "gemini-1.5-pro"
      - "gemini-1.5-flash"

# ============================================
# Embedding 配置
# ============================================
embedding:
  provider: "antigravity"
  model_env: "EMBEDDING_MODEL"
  dimensions_env: "EMBEDDING_DIMENSIONS"
  default_model: "text-embedding-3-small"
  default_dimensions: 1536

# ============================================
# 全局设置
# ============================================
settings:
  # 默认参数
  default_max_tokens: 4096
  default_temperature: 0.7
  
  # 成本控制
  enable_cost_tracking: true
  daily_cost_limit_usd: 100.0
  
  # 速率限制
  rate_limit:
    requests_per_minute: 60
    tokens_per_minute: 100000
    
  # 缓存配置
  cache:
    enabled: true
    ttl_seconds: 3600
    max_size_mb: 100
    
  # 日志
  logging:
    log_prompts: false  # 生产环境关闭
    log_responses: false
    log_token_usage: true

# ============================================
# Agent 到模型的映射覆盖
# ============================================
# 如果某个 Agent 需要特殊配置，在这里覆盖
agent_overrides:
  # 例：CRO 需要更保守的温度
  cro:
    temperature: 0.5
    
  # 例：Skeptic 需要更多创造性
  skeptic:
    temperature: 0.8
    
  # 例：回测主管需要更确定性的输出
  backtest_lead:
    temperature: 0.2
